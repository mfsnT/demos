!function(t){function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var n={};i.m=t,i.c=n,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=1)}([function(t,i){t.exports=jQuery},function(t,i,n){var e=n(0),o=n(2),c=n(3),s=n(4);e(function(){var t=e(".slider");o.init(t);var i=e(".waterfall");c.init(i,20),s.init()})},function(t,i,n){function e(t){this.$ct=t,this.index=0,this.btn_clock=!1,this.timmer=null,this.init()}var o=n(0);e.prototype={init:function(){var t=this.$ct,i=this.$imgs_ct=t.children(".imgs-container"),n=o(window).width(),e=i.children();e.each(function(){o(this).width(n)});var c=e.first().clone(),s=this.imgs_len=e.length,r=this.width=i.width(),h=this.$bullet=t.children(".bullet");this.$next_btn=t.children(".next-btn"),this.$prev_btn=t.children(".prev-btn"),this.$bullet_btns=h.children(),i.append(c),i.css("width",(s+1)*r),this.bind()},bind:function(){var t=this,i=this.$next_btn,n=this.$prev_btn,e=this.$ct,c=this.$bullet;i.on("click",function(){t.btn_clock||(t.index++,t.slider())}),n.on("click",function(){t.btn_clock||(t.index--,t.slider())}),c.on("click","li",function(){o(this).hasClass("active")||(t.index=o(this).index(),t.slider())}),e.on("mouseenter",function(){window.clearInterval(t.timmer)}).on("mouseleave",function(){t.timmer=window.setInterval(function(){i.trigger("click")},2e3)}).trigger("mouseleave")},slider:function(){var t=this,i=this.$imgs_ct,n=this.width,e=this.imgs_len;return t.btn_clock=!0,-1===t.index?(i.css("left",-e*n),void i.animate({left:-(e-1)*n},function(){t.btn_clock=!1,t.index=3,t.showActiveBtn(t.index)})):t.index===e?void i.animate({left:-t.index*n},function(){o(this).css("left",0),t.btn_clock=!1,t.index=0,t.showActiveBtn(t.index)}):void i.animate({left:-t.index*n},function(){t.btn_clock=!1,t.showActiveBtn(t.index)})},showActiveBtn:function(t){this.$bullet_btns.removeClass("active").eq(t).addClass("active")}},t.exports={init:function(t){t.each(function(){new e(o(this))})}}},function(t,i,n){function e(t,i){this.$ct=t,this.btn_clock=null,this.heightArr=[],this.num=i,this.init()}var o=n(0);e.prototype={init:function(){var t=this.$ct,i=this.$imgs=t.children(".imgs"),n=this.nodeWidth=t.find(".imgs-item").outerWidth(!0),e=Math.floor(i.width()/n);this.$btn=t.find(".loadmore"),t.css("width",n*e);for(var o=0;o<e;o++)this.heightArr[o]=0;this.bind()},bind:function(){var t=this.$btn,i=this;t.on("click",function(){i.btn_clock||i.load()}).trigger("click")},load:function(){var t=this;this.btn_clock=!0,this.$btn.text("加载中..."),o.get({url:"/getImgs",dataType:"json",data:{num:t.num}}).done(function(i){0===i.status&&(t.render(t.getNode(i)),t.btn_clock=!1,t.$btn.text("加载更多"))}).fail(function(){document.write("获取数据失败，请检查网络连接"),t.btn_clock=!1,t.$btn.text("加载更多")})},getNode:function(t){var i="";return t.data.forEach(function(t){i+='<li class="imgs-item"><img src="'+t+'"></li>'}),o(i)},render:function(t){var i=this.$imgs,n=this;t.each(function(){var t=o(this);t.find("img").on("load",function(){i.append(t),n.layout(t)})})},layout:function(t){var i=Math.min.apply(null,this.heightArr),n=this.heightArr.indexOf(i),e=this.$imgs;t.css({top:i,left:this.nodeWidth*n,opacity:1}),this.heightArr[n]=this.heightArr[n]+t.outerHeight(!0),e.css("height",Math.max.apply(null,this.heightArr))}},t.exports={init:function(t,i){t.each(function(){new e(o(this),i)})}}},function(t,i,n){function e(){this.init()}var o=n(0);e.prototype={init:function(){var t=o('<div class="gotop">回到顶部</div>'),i=!1;t.on("click",function(){i||(i=!0,o("html").animate({scrollTop:0},800,function(){i=!1}))}),o("body").append(t)}},t.exports={init:function(){new e}}}]);