define("slider",["jquery"],function(t){function i(t){this.$ct=t,this.index=0,this.btn_clock=!1,this.timmer=null,this.init()}return i.prototype={init:function(){var i=this.$ct,n=this.$imgs_ct=i.children(".imgs-container"),e=t(window).width(),c=n.children();c.each(function(){t(this).width(e)});var o=c.first().clone(),s=this.imgs_len=c.length,h=this.width=n.width(),r=this.$bullet=i.children(".bullet");this.$next_btn=i.children(".next-btn"),this.$prev_btn=i.children(".prev-btn"),this.$bullet_btns=r.children(),n.append(o),n.css("width",(s+1)*h),this.bind()},bind:function(){var i=this,n=this.$next_btn,e=this.$prev_btn,c=this.$ct,o=this.$bullet;n.on("click",function(){i.btn_clock||(i.index++,i.slider())}),e.on("click",function(){i.btn_clock||(i.index--,i.slider())}),o.on("click","li",function(){t(this).hasClass("active")||(i.index=t(this).index(),i.slider())}),c.on("mouseenter",function(){window.clearInterval(i.timmer)}).on("mouseleave",function(){i.timmer=window.setInterval(function(){n.trigger("click")},2e3)}).trigger("mouseleave")},slider:function(){var i=this,n=this.$imgs_ct,e=this.width,c=this.imgs_len;return i.btn_clock=!0,-1===i.index?(n.css("left",-c*e),void n.animate({left:-(c-1)*e},function(){i.btn_clock=!1,i.index=3,i.showActiveBtn(i.index)})):i.index===c?void n.animate({left:-i.index*e},function(){t(this).css("left",0),i.btn_clock=!1,i.index=0,i.showActiveBtn(i.index)}):void n.animate({left:-i.index*e},function(){i.btn_clock=!1,i.showActiveBtn(i.index)})},showActiveBtn:function(t){this.$bullet_btns.removeClass("active").eq(t).addClass("active")}},{init:function(n){n.each(function(){new i(t(this))})}}}),define("waterfall",["jquery"],function(t){function i(t,i){this.$ct=t,this.btn_clock=null,this.heightArr=[],this.num=i,this.init()}return i.prototype={init:function(){var t=this.$ct,i=this.$imgs=t.children(".imgs"),n=this.nodeWidth=t.find(".imgs-item").outerWidth(!0),e=Math.floor(i.width()/n);this.$btn=t.find(".loadmore"),t.css("width",n*e);for(var c=0;c<e;c++)this.heightArr[c]=0;this.bind()},bind:function(){var t=this.$btn,i=this;t.on("click",function(){i.btn_clock||i.load()}).trigger("click")},load:function(){var i=this;this.btn_clock=!0,this.$btn.text("加载中..."),t.get({url:"/getImgs",dataType:"json",data:{num:i.num}}).done(function(t){0===t.status&&(i.render(i.getNode(t)),i.btn_clock=!1,i.$btn.text("加载更多"))}).fail(function(){document.write("获取数据失败，请检查网络连接"),i.btn_clock=!1,i.$btn.text("加载更多")})},getNode:function(i){var n="";return i.data.forEach(function(t){n+='<li class="imgs-item"><img src="'+t+'"></li>'}),t(n)},render:function(i){var n=this.$imgs,e=this;i.each(function(){var i=t(this);i.find("img").on("load",function(){n.append(i),e.layout(i)})})},layout:function(t){var i=Math.min.apply(null,this.heightArr),n=this.heightArr.indexOf(i),e=this.$imgs;t.css({top:i,left:this.nodeWidth*n,opacity:1}),this.heightArr[n]=this.heightArr[n]+t.outerHeight(!0),e.css("height",Math.max.apply(null,this.heightArr))}},{init:function(n,e){n.each(function(){new i(t(this),e)})}}}),define("gotop",["jquery"],function(t){function i(){this.init()}return i.prototype={init:function(){var i=t('<div class="gotop">回到顶部</div>'),n=!1;i.on("click",function(){n||(n=!0,t("html").animate({scrollTop:0},800,function(){n=!1}))}),t("body").append(i)}},{init:function(){new i}}}),require.config({baseUrl:"src/js",paths:{jquery:"https://cdn.bootcss.com/jquery/1.12.4/jquery.min",slider:"components/slider",waterfall:"components/waterfall",gotop:"components/gotop"}}),require(["jquery","slider","waterfall","gotop"],function(t,i,n,e){t(function(){var c=t(".slider");i.init(c);var o=t(".waterfall");n.init(o,20),e.init()})}),define("main",function(){});